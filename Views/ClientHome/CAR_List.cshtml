@{
    ViewData["Title"] = "List";
    Layout = "~/Views/Shared/_Layout_Client.cshtml";
}

@model CLIENT_Model
@using System.Data

<div class="page-heading">
    <div class="breadcrumbs">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <ul>
                        <li class="home"> <a href="index-2.html" title="Go to Home Page">Home</a> <span>&rsaquo; </span> </li>
                        <li class="category1599"> <a href="grid.html" title="">New Car</a> <span>&rsaquo; </span> </li>
                        <li class="category1600"> <a href="grid.html" title="">Audi</a> <span>&rsaquo; </span> </li>
                        <li class="category1601"> <strong>Sedans</strong> </li>
                    </ul>
                </div>
                <!--col-xs-12-->
            </div>
            <!--row-->
        </div>
        <!--container-->
    </div>
    <div class="page-title">
        <h2>PRODUCT LISTING</h2>
    </div>
</div>
<!--breadcrumbs-->
<!-- BEGIN Main Container col2-left -->
<section class="main-container col2-left-layout bounceInUp animated">
    <!-- For version 1, 2, 3, 8 -->
    <!-- For version 1, 2, 3 -->
    <div class="container">
        <div class="row">
            <div class="col-main col-sm-9 col-sm-push-3 product-grid">
                <div class="pro-coloumn">
                    <article class="col-main">
                        <div class="toolbar">
                            <div class="sorter">
                                @*<div class="view-mode"> <span title="Grid" class="button button-active button-grid">&nbsp;</span><a href="list.html" title="List" class="button-list">&nbsp;</a> </div>*@
                            </div>
                            <div id="sort-by">
                                <lab class="left">Sort By: </lab  el>
                                <ul>
                                    <li>
                                        <a href="#">Position<span class="right-arrow"></span></a>
                                        <ul>
                                            <li><a href="#">Name</a></li>
                                            <li><a href="#">Price</a></li>
                                            <li><a href="#">Position</a></li>
                                        </ul>
                                    </li>
                                </ul>
                                <a class="button-asc left" href="#" title="Set Descending Direction"><span class="top_arrow"></span></a>
                            </div>
                            <div class="pager">
                                <div id="limiter">
                                    <label>View: </label>
                                    <ul>
                                        <li>
                                            <a href="#">15<span class="right-arrow"></span></a>
                                            <ul>
                                                <li><a href="#">20</a></li>
                                                <li><a href="#">30</a></li>
                                                <li><a href="#">35</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                                <div class="pages">
                                    <label>Page:</label>
                                    <ul class="pagination">
                                        <li><a href="#">&laquo;</a></li>
                                        <li class="active"><a href="#">1</a></li>
                                        <li><a href="#">2</a></li>
                                        <li><a href="#">3</a></li>
                                        <li><a href="#">4</a></li>
                                        <li><a href="#">5</a></li>
                                        <li><a href="#">&raquo;</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="category-products">
                            <ul class="products-grid">
                                @foreach (DataRow dr in Model.CarsByType.Rows)
{
                                <li class="item col-lg-4 col-md-3 col-sm-4 col-xs-6">
                                    <div class="item-inner">
                                        <div class="item-img">
                                            <div class="item-img-info">
                                                    <a asp-controller="ClientHome" asp-action="Details" asp-route-CarID="@Convert.ToInt32(dr["CarID"].ToString())" title="Retis lapen casen" class="product-image"><img src="@dr["PhotoPath"]" alt="Retis lapen casen"></a>
                                               
                                                <div class="item-box-hover">
                                                    <div class="box-inner">
                                                        <div class="add_cart">
                                                            <button class="button btn-cart" type="button"></button>
                                                        </div>
                                                        <div class="product-detail-bnt"><a class="button detail-bnt"><span>Quick View</span></a></div>
                                                        <div class="actions"><span class="add-to-links"><a href="#" class="link-wishlist" title="Add to Wishlist"><span>Add to Wishlist</span></a> </span> </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="item-info">
                                            <div class="info-inner">
                                                    <div class="item-title"><a asp-controller="ClientHome" asp-action="Details" asp-route-CarID="@Convert.ToInt32(dr["CarID"].ToString())" title="Retis lapen casen">@dr["MakeName"] @dr["Name"]</a> </div>
                                                <div class="item-content">
                                                    <div class="rating">
                                                        <div class="ratings">
                                                            <div class="rating-box">
                                                                <div class="rating" style="width:80%"></div>
                                                            </div>
                                                            <p class="rating-links"><a href="#">1 Review(s)</a> <span class="separator">|</span> <a href="#">Add Review</a> </p>
                                                        </div>
                                                    </div>
                                                    <div class="item-price">
                                                            <div class="price-box"><span class="regular-price"><span class="price">₹ @dr["Price"]</span> </span> </div>
                                                    </div>
                                                    <div class="other-info">
                                                        <div class="col-km"><i class="fa fa-tachometer"></i> 4875km</div>
                                                        <div class="col-engine"><i class="fa fa-gear"></i> Automatic</div>
                                                        <div class="col-date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </li>
                               }
                            </ul>
                        </div>
                        <div class="toolbar bottom">

                            <div id="sort-by">
                                <label class="left">Sort By: </label>
                                <ul>
                                    <li>
                                        <a href="#">Position<span class="right-arrow"></span></a>
                                        <ul>
                                            <li><a href="#">Name</a></li>
                                            <li><a href="#">Price</a></li>
                                            <li><a href="#">Position</a></li>
                                        </ul>
                                    </li>
                                </ul>
                                <a class="button-asc left" href="#" title="Set Descending Direction"><span class="top_arrow"></span></a>
                            </div>
                            <div class="pager">
                                <div id="limiter">
                                    <label>View: </label>
                                    <ul>
                                        <li>
                                            <a href="#">15<span class="right-arrow"></span></a>
                                            <ul>
                                                <li><a href="#">20</a></li>
                                                <li><a href="#">30</a></li>
                                                <li><a href="#">35</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                                <div class="pages">
                                    <label>Page:</label>
                                    <ul class="pagination">
                                        <li><a href="#">&laquo;</a></li>
                                        <li class="active"><a href="#">1</a></li>
                                        <li><a href="#">2</a></li>
                                        <li><a href="#">3</a></li>
                                        <li><a href="#">4</a></li>
                                        <li><a href="#">5</a></li>
                                        <li><a href="#">&raquo;</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                    </article>
                </div>
                <!--	///*///======    End article  ========= //*/// -->
            </div>
            <aside class="col-left sidebar col-sm-3 col-xs-12 col-sm-pull-9 wow bounceInUp animated">
                  <!-- BEGIN SIDE-NAV-CATEGORY -->
                <div class="side-nav-categories">
                    <div class="block-title"> Categories </div>
                    <!--block-title-->
                    <!-- BEGIN BOX-CATEGORY -->
                    <div class="box-content box-category">
                        <ul>
                            <li>
                                <a onclick="toggleDropdown()">Car Type</a>
                                <span class="subDropdown plus" id="dropdownIcon"></span>
                                <ul class="level0_415" style="display:none" id="dropdownList">
                                    @foreach (DataRow dr in Model.CarCategories.Rows)
                                    {
                                        if (!string.IsNullOrEmpty(dr["TypeName"].ToString()))
                                        {
                                            <li>
                                                <a asp-controller="ClientHome" asp-action="CarList" asp-route-TypeID="@Convert.ToInt32(dr["TypeID"].ToString())">@dr["TypeName"]</a>
                                                <span class=""></span>
                                                <!--level1-->
                                            </li>
                                        }
                                    }

                                </ul>

                            </li>
                        <!--level0-->
                        @*</li>*@
                        <!--level 0-->
                        <li>
                                <a onclick="toggleFuelTypeDropdown()">Fuel Type</a> <span id="fuelTypeIcon" class="subDropdown plus"></span>
                                <ul class="level0_455" style="display:none" id="fuelTypeList">
                                    @foreach (DataRow dr in Model.CarCategories.Rows)
                                    {
                                        if (!string.IsNullOrEmpty(dr["FuelTypeName"].ToString()))
                                        {
                                            <li>
                                                <a asp-controller="ClientHome" asp-action="CarList" asp-route-FuelTypeName="@dr["FuelTypeName"].ToString()"> @dr["FuelTypeName"]</a>
                                                <span class=""></span>
                                                <!--level1-->
                                            </li>
                                        }
                                    }
                                </ul>

                               
                        </li>

                        <!--level0-->
                        @*</li>*@
                        <!--level 0-->
                        <li>
                                <a onclick="toggleTransTypeDropdown()">Transmission Type</a> <span id="transTypeIcon" class="subDropdown plus"></span>
                                <ul class="level0_482" style="display:none" id="transTypeList">
                                    @foreach (DataRow dr in Model.CarCategories.Rows)
                                    {
                                        if (!string.IsNullOrEmpty(dr["TransmissionTypeName"].ToString()))
                                        {
                                            <li>
                                                <a asp-controller="ClientHome" asp-action="CarList" asp-route-TransmissionTypeName="@dr["TransmissionTypeName"].ToString()">@dr["TransmissionTypeName"]</a>
                                                <span class=""></span>
                                                <!--level1-->
                                            </li>
                                        }
                                    }
                             </ul>
                              
                        </li>
                        <!--level1-->
                        <!--level0-->
                        @*</li>*@
                        <!--level 0-->
                      </ul>
                    </div>
                    <!--box-content box-category-->
                </div>
                <!--side-nav-categories-->

               
              

                <div class="section-filter">
                    <div class="b-filter__inner bg-grey">
                        <h2>Find your right car</h2>
                        <form class="b-filter" asp-controller="ClientHome" asp-action="CarFilter">
                          <div class="btn-group bootstrap-select" style="width: 100%;">
                                <select class="selectpicker" asp-for="MakeID" asp-items="@(new SelectList(ViewBag.MakeList,"MakeID","MakeName"))" onchange="fnOnMakeChange();" data-width="100%" tabindex="-98">
                                    <option>Select Make</option>
                                </select>
                            </div>
                            <div class="btn-group bootstrap-select" style="width: 100%;">
                                <select class="selectpicker" id="MyCarID" asp-for="CarID" asp-items="@(new SelectList(ViewBag.CarList,"CarID","Name"))" data-width="100%" tabindex="-98">
                                    <option value="Select Car"></option>
                                </select>
                            </div>

                            <div class="btn-group bootstrap-select" style="width: 100%;">
                                <select class="selectpicker" asp-for="TypeID" asp-items="@(new SelectList(ViewBag.TypeList,"TypeID","TypeName"))" data-width="100%" tabindex="-98">
                                    <option>Select Type</option>
                                </select>
                            </div>
                            <div class="btn-group bootstrap-select" style="width: 100%;">
                                <select class="selectpicker" asp-for="FuelTypeName" asp-items="@(new SelectList(ViewBag.FuelTypeList,"FuelTypeName","FuelTypeName"))" data-width="100%" tabindex="-98">
                                    <option>Select FuelType</option>
                                </select>
                            </div>
                            <div class="btn-group bootstrap-select" style="width: 100%;">
                                <select class="selectpicker" asp-for="TransmissionTypeName" asp-items="@(new SelectList(ViewBag.TransmissionTypeList,"TransmissionTypeName","TransmissionTypeName"))" data-width="100%" tabindex="-98">
                                    <option>Select TransmissionType</option>
                                </select>
                            </div>
                        @*    <div class="btn-group bootstrap-select" style="width: 100%;">
                                <select class="selectpicker" data-width="100%" tabindex="-98">
                                    <option>Select Year</option>
                                    <option>2017</option>
                                    <option>2016</option>
                                    <option>2015</option>
                                </select>
                            </div>*@
                            <div class="ui-filter-slider">
                                <div class="sidebar-widget-body m-t-10">
                                    <div class="price-range-holder">
                                        <span class="min-max"> <span class="pull-left">$200.00</span> <span class="pull-right">$800.00</span> </span>
                                        <input type="text" class="price-slider" value="" style="display:block">
                                    </div>
                                    <!-- /.price-range-holder -->
                                </div>
                            </div>
                            <div>
                                @*<div class="b-filter__btns">*@
                                    @*<button type="submit" >search vehicle</button>*@
                                @*</div>*@
                            </div>
                                  <button type="submit" class="search-btn"> <span class="glyphicon glyphicon-search"> <span class="sr-only">Search</span> </span> </button>
                  
                        </form>
                    </div>
                </div>
              


            </aside>
            <!--col-right sidebar-->
        </div>
        <!--row-->
    </div>
    <!--container-->
</section>
<!--main-container col2-left-layout-->
@section Scripts{
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

        <script src="https://code.jquery.com/jquery-3.6.0.min.js" ></script>
    <script>
        function addFeature() {
            var div = $('<div class="form-group"><input type="text" class="form-control" placeholder="Enter Feature" name="NewFeatureNames" /><span class="text-danger"></span></div>');
            $('#additional-features').append(div);
        }


        $(document).ready(function () {
    // Initialize selectpicker on page load
    $('.selectpicker').selectpicker();
});
function fnOnMakeChange() {
    var MakeID = $("#MakeID").val();
    if (MakeID !== "") {
        $("#MyCarID").empty();
        $("#MyCarID").append($("<option></option>").val("").html("Select Car"));
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "@Url.Action("DropDownByMakeCar","ClientHome")" + "?&MakeID=" + MakeID,
            data: {},
            dataType: "json",
            success: function (Result) {
    var MyCarID = $("#MyCarID");
    MyCarID.empty();
    MyCarID.append($("<option></option>").val("").html("Select Car"));
    $.each(Result, function (key, value) {
        console.log(value);
        MyCarID.append($("<option></option>").val(value.carID).text(value.name));
    });

    // Refresh the selectpicker
    MyCarID.selectpicker("refresh");

    // Update the 'Select Car' text inside the dropdown
    var selectPickerUl = MyCarID.next().find('.inner.selectpicker');
    selectPickerUl.empty();
    selectPickerUl.append($('<li data-original-index="0" class="selected"><a tabindex="0" class="" data-normalized-text="Select Car"><span class="text">Select Car</span><span class="glyphicon glyphicon-ok icon-ok check-mark"></span></a></li>'));
},

            error: function (r) {
                alert("Error While Loading Dropdown!");
            }
        });
    }
    else {
        $("#MyCarID").empty();
        $("#MyCarID").append($("<option></option>").val("").html("Select Car"));
        
        // Update the selected option in the dropdown menu
        $(".selectpicker li[data-original-index='0']").addClass("selected");
        $(".selectpicker span.filter-option").text("Select Car");
    }
}

        function fnOnCarChange() {
            var CarID = $("#CarID").val();

            if (CarID !== "") {
                $("select[name=VariantID]").empty();
                $("select[name=VariantID]").append($("<option></option>").val("").html("Select Variant"));

                // Set selected value to empty initially
                $("select[name=VariantID]").val("");

                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "@Url.Action("DropDownByMake","CAR_CarWiseFeature")" + "?&CarID=" + CarID,
                    data: {},
                    dataType: "json",
                    success: function (Result) {
                        $.each(Result, function (key, value) {
                            console.log(value);
                            $("select[name=VariantID]").append($("<option></option>").val(value.variantID).text(value.variantName));
                        });
                    },
                    error: function (r) {
                        alert("Error While Loading Dropdown!");
                    }
                });
            } else {
                $("select[name=VariantID]").empty();
                $("select[name=VariantID]").append($("<option></option>").val("").html("Select Variant"));
            }
        }
    </script>
}
